const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  // safetySettings: Adjust safety settings
  // See https://ai.google.dev/gemini-api/docs/safety-settings
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for location:New York USA,for 1 day and 1 night for family with a Luxury budget with a flight details, flight price with booking url,hotels options list with HotelName, Hotel address,Price, hotel image url,geo coordinates,rating,description and places to visit nearby with placeName, place details, place image url, geo coordinates,ticket pricing,time to travel each of the location for 1 day and 1 night with each day plan with best time to visit in JSON format.\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "flight": {\n    "details": {\n      "airline": "Delta Air Lines",\n      "flightNumber": "DL1234",\n      "departureAirport": "JFK",\n      "arrivalAirport": "SFO",\n      "departureTime": "10:00 AM",\n      "arrivalTime": "1:00 PM",\n      "duration": "5 hours"\n    },\n    "price": {\n      "currency": "USD",\n      "amount": "500"\n    },\n    "bookingUrl": "https://www.delta.com/"\n  },\n  "hotel": [\n    {\n      "name": "The Peninsula New York",\n      "address": "700 Fifth Ave, New York, NY 10019, United States",\n      "price": {\n        "currency": "USD",\n        "amount": "1500"\n      },\n      "imageUrl": "https://www.thepeninsula.com/newyork/en/images/hotel-exterior/peninsula-new-york-exterior-01.jpg",\n      "geoCoordinates": {\n        "latitude": 40.7580,\n        "longitude": -73.9855\n      },\n      "rating": 4.5,\n      "description": "A luxurious hotel in Midtown Manhattan, offering stunning views of Central Park and impeccable service.",\n      "placesToVisitNearby": [\n        {\n          "name": "Central Park",\n          "details": "A sprawling urban oasis with walking paths, gardens, and entertainment.",\n          "imageUrl": "https://www.nycgovparks.org/img/parks/central-park/central-park-overview.jpg",\n          "geoCoordinates": {\n            "latitude": 40.7829,\n            "longitude": -73.9654\n          },\n          "ticketPricing": "Free",\n          "timeToTravel": "2 hours"\n        },\n        {\n          "name": "Museum of Modern Art (MoMA)",\n          "details": "A world-renowned museum showcasing modern and contemporary art.",\n          "imageUrl": "https://www.moma.org/images/collection_images/MoMA_003_web.jpg",\n          "geoCoordinates": {\n            "latitude": 40.7614,\n            "longitude": -73.9779\n          },\n          "ticketPricing": "Adults $25",\n          "timeToTravel": "2 hours"\n        }\n      ]\n    },\n    {\n      "name": "The Ritz-Carlton New York, Central Park",\n      "address": "50 Central Park South, New York, NY 10019, United States",\n      "price": {\n        "currency": "USD",\n        "amount": "1200"\n      },\n      "imageUrl": "https://www.ritzcarlton.com/en/hotels/new-york/central-park/images/hotel-exterior/exterior-night.jpg",\n      "geoCoordinates": {\n        "latitude": 40.7649,\n        "longitude": -73.9770\n      },\n      "rating": 4.7,\n      "description": "A sophisticated hotel with elegant rooms and a prime location overlooking Central Park.",\n      "placesToVisitNearby": [\n        {\n          "name": "Carnegie Hall",\n          "details": "A world-famous concert hall hosting renowned musicians and performances.",\n          "imageUrl": "https://www.carnegiehall.org/sites/default/files/styles/hero_image/public/2021-10/carnegie_hall_exterior_day_wide.jpg",\n          "geoCoordinates": {\n            "latitude": 40.7585,\n            "longitude": -73.9824\n          },\n          "ticketPricing": "Varies by event",\n          "timeToTravel": "1 hour"\n        },\n        {\n          "name": "Rockefeller Center",\n          "details": "A famous complex with art deco architecture, shops, and the iconic Top of the Rock observation deck.",\n          "imageUrl": "https://www.rockefellercenter.com/sites/default/files/styles/hero_image/public/2021-06/IMG_0200.JPG",\n          "geoCoordinates": {\n            "latitude": 40.7580,\n            "longitude": -73.9786\n          },\n          "ticketPricing": "Adults $39",\n          "timeToTravel": "1.5 hours"\n        }\n      ]\n    }\n  ],\n  "dayPlan": [\n    {\n      "day": "Day 1",\n      "activities": [\n        {\n          "time": "10:00 AM - 12:00 PM",\n          "activity": "Explore Central Park",\n          "details": "Take a leisurely stroll through the park, visit the Bethesda Fountain, and enjoy a picnic lunch.",\n          "geoCoordinates": {\n            "latitude": 40.7829,\n            "longitude": -73.9654\n          }\n        },\n        {\n          "time": "12:00 PM - 2:00 PM",\n          "activity": "Lunch at The Polo Bar",\n          "details": "Enjoy a luxurious lunch at this upscale restaurant in The Peninsula New York.",\n          "geoCoordinates": {\n            "latitude": 40.7580,\n            "longitude": -73.9855\n          }\n        },\n        {\n          "time": "2:00 PM - 4:00 PM",\n          "activity": "Visit the Museum of Modern Art (MoMA)",\n          "details": "Admire masterpieces of modern and contemporary art.",\n          "geoCoordinates": {\n            "latitude": 40.7614,\n            "longitude": -73.9779\n          }\n        },\n        {\n          "time": "4:00 PM - 6:00 PM",\n          "activity": "Shopping on Fifth Avenue",\n          "details": "Browse the designer boutiques and luxury stores along Fifth Avenue.",\n          "geoCoordinates": {\n            "latitude": 40.7580,\n            "longitude": -73.9855\n          }\n        },\n        {\n          "time": "6:00 PM - 8:00 PM",\n          "activity": "Dinner at The Grill",\n          "details": "Indulge in a fine dining experience at this renowned restaurant in The Time Warner Center.",\n          "geoCoordinates": {\n            "latitude": 40.7606,\n            "longitude": -73.9808\n          }\n        },\n        {\n          "time": "8:00 PM - 10:00 PM",\n          "activity": "Enjoy a Broadway show",\n          "details": "Catch a performance at one of the famous Broadway theaters.",\n          "geoCoordinates": {\n            "latitude": 40.7577,\n            "longitude": -73.9856\n          }\n        }\n      ]\n    },\n    {\n      "day": "Day 2",\n      "activities": [\n        {\n          "time": "10:00 AM - 12:00 PM",\n          "activity": "Visit the Metropolitan Museum of Art",\n          "details": "Explore one of the world\'s largest and most comprehensive art museums.",\n          "geoCoordinates": {\n            "latitude": 40.7794,\n            "longitude": -73.9632\n          }\n        },\n        {\n          "time": "12:00 PM - 2:00 PM",\n          "activity": "Lunch at The Roof at Park South",\n          "details": "Enjoy a delicious lunch with breathtaking views at this rooftop restaurant.",\n          "geoCoordinates": {\n            "latitude": 40.7552,\n            "longitude": -73.9839\n          }\n        },\n        {\n          "time": "2:00 PM - 4:00 PM",\n          "activity": "Explore the High Line",\n          "details": "Walk along this elevated park built on former railway tracks.",\n          "geoCoordinates": {\n            "latitude": 40.7572,\n            "longitude": -74.0059\n          }\n        },\n        {\n          "time": "4:00 PM - 6:00 PM",\n          "activity": "Enjoy a cocktail at The St. Regis Bar",\n          "details": "Relax and savor a handcrafted cocktail at this iconic bar.",\n          "geoCoordinates": {\n            "latitude": 40.7580,\n            "longitude": -73.9836\n          }\n        },\n        {\n          "time": "6:00 PM - 8:00 PM",\n          "activity": "Dinner at The NoMad Restaurant",\n          "details": "Savor a modern American dining experience at this stylish restaurant.",\n          "geoCoordinates": {\n            "latitude": 40.7393,\n            "longitude": -73.9905\n          }\n        },\n        {\n          "time": "8:00 PM - 10:00 PM",\n          "activity": "Enjoy a nightcap at The Bar Room",\n          "details": "Wind down the night with a nightcap at this intimate bar in The NoMad Hotel.",\n          "geoCoordinates": {\n            "latitude": 40.7393,\n            "longitude": -73.9905\n          }\n        }\n      ]\n    }\n  ],\n  "bestTimeToVisit": "Spring (April-May) and Fall (September-October) are ideal times to visit New York City for pleasant weather and fewer crowds."\n}\n```\n\n**Explanation:**\n\nThis JSON format provides a comprehensive travel plan for a 1-day and 1-night trip to New York City for a family with a luxury budget:\n\n* **flight:** Includes flight details, price, and booking URL.\n* **hotel:** Lists two luxury hotel options with details like name, address, price, image URL, geo coordinates, rating, description, and nearby attractions.\n* **dayPlan:** Outlines a suggested itinerary for each day, including specific activities, times, details, and geo coordinates.\n* **bestTimeToVisit:** Provides recommendations for the best time to visit based on weather and crowd conditions.\n\n**Note:**\n\n* The flight information is a placeholder. You can replace it with actual flight details for your specific travel dates and destination.\n* The hotel prices are estimates and may vary depending on the season and availability.\n* The activities and restaurants mentioned are just suggestions. You can customize the plan based on your family\'s interests and preferences. \n* Make sure to check ticket pricing and availability for attractions and shows before your trip. \n',
        },
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
